[![N|Solid](https://www.maib.md/images/logo.svg)](https://www.maib.md)

# Модуль Maib Payment Gateway для платфморы CS-Cart
Этот плагин позволяет интегрировать ваш CS-Cart интернет-магазин с **maib e-commerce API** для приема онлайн-платежей (Visa/Mastercard/Google Pay/Apple Pay).

## Описание
Подробнее об этапах интеграции и требованиях к сайту можно узнать [здесь](https://docs.maibmerchants.md/ru/etapy-i-trebovaniya-k-integracii).

Чтобы протестировать интеграцию, вам понадобятся данные доступа к тестовому проекту (Project ID / Project Secret / Signature Key). Для этого просим вас отправить запрос на электронную почту: ecom@maib.md.

Для осуществления реальных платежей вам необходимо заключить договор e-commerce и выполнить как минимум одну успешную транзакцию, используя данные тестового проекта и данные карты для тестирования.

После подписания договора вы получите доступ к платформе maibmerchants и сможете активировать Производственный Проект.

## Функционал
**Платежи онлайн**: Visa / Mastercard / Apple Pay / Google Pay.

**Три валюты**: MDL / USD / EUR (в зависимости от настроек вашего проекта).

**Возврат платежа**: Для возврата платежа необходимо обновить статус заказа (см. _refund.png_) на статус, выбранный для _Возврат платежа_ в настройках расширения **Модуль платежного шлюза Maib** (см. _settings-1.png_ и _settings-2.png_). Сумма платежа будет возвращена на карту клиента.

## Требования
- Регистрация на платформе maibmerchants.md
- CS-Cart платформа (версия > 4.7.2)
- Расширения _curl_ и _json_ включены

## Установка
1. Загрузите файл расширения из репозитория Github или CS-Cart.
2. В панели администратора CS-Cart/интерфейсе администратора перейдите в раздел _Модули_.
3. В поле ввода введите «maib» или найдите в списке **Модуль платежного шлюза Maib**.
4. Нажмите кнопку _Установить_ и CS-Cart начнет процесс установки.
5. После того, как вы увидите, что модуль успешно установлен, перейдите в _Администрирование_ > _Способы оплаты_ и нажмите «+» (добавить способ оплаты).
6. В раскрывающемся списке _Процессор_ во вкладке _Общие_ найдите или найдите **MAIB** и выберите его. Появится новая вкладка _Настроить_.
7. На вкладке _Настроить_ вы увидите два раздела: _Настройки maibmerchants.md_ и _Настройки статуса заказа_. Заполните все необходимые поля и нажмите кнопку _Создать_.

## Настройки
1. Project ID - Project ID из Проекта (Тестовый или Производственный) в maibmerchants.
2. Project Secret -  Project Secret из Проекта (Тестовый или Производственный) в maibmerchants. Доступен после активации проекта.
3. Signature Key - Signature Key из Проекта (Тестовый или Производственный) в maibmerchants. Доступен после активации проекта.
4. Ok URL / Fail URL / Callback URL - добавьте эти ссылки в соответствующие поля в настройках Проекта в maibmerchants.
5. Настройки статуса заказа: Платеж в ожидании - Статус заказа, когда платеж находится в ожидании.
6. Настройки статуса заказа: Успешная оплата - Статус заказа после успешного завершения платежа.
7. Настройки статуса заказа: Неуспешная оплата - Статус заказа при неуспешной оплаты.
8. Настройки статуса заказа: Возврат платежа - Статус заказа при возврате платежа. Для возврата платежа обновите статус заказа до этого выбранного статуса (см. _refund.png_).

## Отладка
Если вам требуется дополнительная помощь, обращайтесь в службу поддержки ecommerce **Модуль платежного шлюза Maib**, отправив сообщние по адресу ecom@maib.md.

В письме обязательно укажите следующую информацию:
- Название компании
- Project ID
- Дата и время транзакции с ошибками
- Ошибки из файла с логами